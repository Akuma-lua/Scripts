local RunService = game:GetService("RunService")
local Vim = game:GetService("VirtualInputManager")
local player = game.Players.LocalPlayer
local TweenService = game:GetService('TweenService')

local cloneref = (cloneref or clonereference or function(instance) return instance end)
local ReplicatedStorage = cloneref(game:GetService("ReplicatedStorage"))

local WindUI
WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

-- // WINDOW SETUP // --
local Window = WindUI:CreateWindow({
    Title = "We love tits",
    Author = "Escape tsunami for brainrots!",
    Folder = "TittyHubConfig",
    Icon = "",
    Size = UDim2.fromOffset(580, 460),
    ToggleKey = Enum.KeyCode.K,
    OpenButton = { Enabled = true, Draggable = true }
})

-- // TABS // --
local MainTab = Window:Tab({ Title = "Main", Icon = "solar:home-bold" })
local PlayerTab = Window:Tab({ Title = "Player", Icon = "solar:user-bold" })
local SettingsTab = Window:Tab({ Title = "Settings", Icon = "solar:settings-bold" })
local DiscordTab = Window:Tab({ Title = "Discord", Icon = "solar:share-bold" })

-- // PLAYER TAB SECTIONS // --
local PlayerSection = PlayerTab:Section({ Title = "Movement & View" })

PlayerSection:Slider({
    Title = "Walk Speed",
    Step = 1,
    Value = { Default = 16, Min = 0, Max = 999 },
    Callback = function(Value)
        player:SetAttribute("CurrentSpeed", tonumber(Value))
        WindUI:Notify({
            Title = "Walk Speed",
            Content = "Speed set to: " .. tostring(Value),
            Duration = 2.5
        })
    end
})

PlayerSection:Slider({
    Title = "Jump Power",
    Step = 1,
    Value = { Default = 50, Min = 0, Max = 300 },
    Callback = function(Value)
        local char = player.Character
        local hum = char and char:FindFirstChildOfClass("Humanoid")
        if hum then
            hum.UseJumpPower = true
            hum.JumpPower = Value
            WindUI:Notify({
                Title = "Jump Power",
                Content = "Jump power set to: " .. tostring(Value),
                Duration = 2.5
            })
        end
    end
})

PlayerSection:Slider({
    Title = "Bat hitbox",
    Step = 1,
    Value = { Default = 2, Min = 2, Max = 100 },
    Callback = function(Value)
        local char = player.Character
        local back = player.Backpack 
        if back then
        local bat = back:FindFirstChild("Basic Bat") or char:FindFirstChild("Basic Bat")
        if bat then
            bat.Hitbox.Size = Vector3.new(Value, Value, Value)
            bat.Hitbox.Transparency = 0.2
            bat.Hitbox.Color = Color3.fromRGB(255, 0, 0)
        end
            WindUI:Notify({
                Title = "Bat hitbox",
                Content = "Bat hitbox set to: " .. tostring(Value),
                Duration = 2.5
            })
        end
    end
})

PlayerSection:Button({
    Title = "No View Limit",
    Callback = function() player.CameraMaxZoomDistance = 999999 end
})

local BoostSection = PlayerTab:Section({ Title = "Speed Boosts" })

BoostSection:Button({ 
    Title = "Get Double Speed", 
    Callback = function()
        player:SetAttribute("HasDoubleSpeed", true)
        WindUI:Notify({ Title = "Boost", Content = "Successfully got double speed", Duration = 2.5 })
    end 
})

BoostSection:Button({ 
    Title = "Get Speed Boost", 
    Callback = function() 
        player:SetAttribute("HasSpeedBoost", true)
        WindUI:Notify({ Title = "Boost", Content = "Successfully got speed boost", Duration = 2.5 })
    end 
})

BoostSection:Button({ 
    Title = "Get Super Speed Boost", 
    Callback = function() 
        player:SetAttribute("HasSuperSpeedBoost", true) 
        WindUI:Notify({ Title = "Boost", Content = "Successfully got super speed boost", Duration = 2.5 })
    end 
})

-- // MAIN TAB SECTIONS // --
local AutomationSection = MainTab:Section({ Title = "Automation" })

local tsunamiConnection
AutomationSection:Toggle({
    Title = "Transparent Tsunami",
    Value = false,
    Callback = function(state)
        local function apply(obj)
            if obj:IsA("Model") then obj:SetAttribute("Speed", 0)
            elseif obj.Name == "TsunamiWave" then obj.Transparency = 0.7 end
        end
        if state then
            for _, v in ipairs(workspace.ActiveTsunamis:GetDescendants()) do apply(v) end
            tsunamiConnection = workspace.ActiveTsunamis.DescendantAdded:Connect(apply)
        elseif tsunamiConnection then
            tsunamiConnection:Disconnect()
        end
        WindUI:Notify({ Title = "Tsunami", Content = "Status: " .. tostring(state), Duration = 2.5 })
    end
})

local brainrotConnection
AutomationSection:Toggle({
    Title = "Instant Steal",
    Value = false,
    Callback = function(state)
        local function fix(v) if v:IsA("ProximityPrompt") then v.HoldDuration = 0 end end
        if state then
            for _, v in ipairs(workspace.ActiveBrainrots:GetDescendants()) do fix(v) end
            brainrotConnection = workspace.ActiveBrainrots.DescendantAdded:Connect(fix)
        elseif brainrotConnection then
            brainrotConnection:Disconnect()
        end
        WindUI:Notify({ Title = "Instant Steal", Content = "Status: " .. tostring(state), Duration = 2.5 })
    end
})

local Players = game:GetService("Players")
local Vim = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer
local antiAfkRunning = false

AutomationSection:Toggle({
    Title = "Anti AFK",
    Value = false,
    Callback = function(state)
        antiAfkRunning = state

        if state then
            task.spawn(function()
                while antiAfkRunning do
                    Vim:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                    task.wait(0.1)
                    Vim:SendMouseButtonEvent(0, 0, 0, false, game, 0)
                    task.wait(60)
                end
            end)
        end

        WindUI:Notify({
            Title = "Anti AFK",
            Content = "Status: " .. (state and "ON" or "OFF"),
            Duration = 2.5
        })
    end
})

local moneyRunning = false
AutomationSection:Toggle({
    Title = "Auto Collect Money",
    Value = false,
    Callback = function(state)
        moneyRunning = state
        WindUI:Notify({ Title = "Auto Collect", Content = "Status: " .. tostring(state), Duration = 2.5 })
        
        local basesFolder = workspace:WaitForChild("Bases_NEW")
        local ownedBase = nil
        for _, base in ipairs(basesFolder:GetChildren()) do
            if base:GetAttribute("Holder") == player.UserId then ownedBase = base break end
        end

        if state and ownedBase then
            task.spawn(function()
                while moneyRunning do
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        for _, v in ipairs(ownedBase:GetDescendants()) do
                            if not moneyRunning then break end
                            if v.Name == "Collect" and (v:IsA("BasePart") or v:IsA("Model")) then
                                hrp.CFrame = (v:IsA("Model") and v:GetPivot() or v.CFrame) + Vector3.new(0, 7, 0)
                                task.wait(0.5)
                            end
                        end
                    end
                    task.wait(1)
                end
            end)
        end
    end
})

-- // RADIOACTIVE SECTION // --
local RadioactiveSection = MainTab:Section({ Title = "Radioactive Events" })
local radioRunning = false
local eventFolder = workspace:FindFirstChild("EventParts")
local oldcframe = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame

RadioactiveSection:Toggle({
    Title = "Auto Collect Radioactive Coins",
    Value = false,
    Callback = function(state)
        radioRunning = state
        if state and eventFolder then
            task.spawn(function()
                local function collect(v)
                    if not radioRunning then return end
                    local char = player.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        if v:IsA("Model") then v:PivotTo(char:GetPivot())
                        elseif v:IsA("BasePart") then v.CanCollide = false v.CFrame = char:GetPivot() end
                    end
                end
                for _, v in ipairs(eventFolder:GetChildren()) do collect(v) end
                eventFolder.DescendantAdded:Connect(collect)
            end)
        end
    end
})

local player = game.Players.LocalPlayer
local obbyend = nil

local function setObbyEnd(obj)
    local found = obj:FindFirstChild("ObbyEnd")
    if found then
        obbyend = found
    end
end

local radioactive = workspace.MapVariants:FindFirstChild("Radioactive")
if radioactive then
    setObbyEnd(radioactive)
end

workspace.MapVariants.DescendantAdded:Connect(function(obj)
    if obj.Name == "Radioactive" then
        setObbyEnd(obj)
    end
end)

RadioactiveSection:Button({
    Title = "Teleport to obby end",
    Callback = function()
        local char = player.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        if not (hrp and obbyend) then return end

        local oldcframe = hrp.CFrame

        if obbyend:IsA("BasePart") then
            hrp.CFrame = obbyend.CFrame
        elseif obbyend:IsA("Model") then
            hrp.CFrame = obbyend:GetPivot()
        end

        task.wait(0.15)
        hrp.CFrame = oldcframe
    end
})

-- // CHECKS SECTION // --
local ChecksSection = MainTab:Section({ Title = "Checks" })

ChecksSection:Button({
    Title = "Check Radioactive Timer",
    Callback = function()
        local model = workspace:FindFirstChild("Model")
        local children = model and model:GetChildren()
        local timer = (children and #children >= 16 and children[16]:FindFirstChild("TextLabel2", true))
        WindUI:Notify({ Title = "Radioactive Timer", Content = timer and timer.Text or "Not Found", Duration = 2.5 })
    end
})

ChecksSection:Button({
    Title = "Check Celestial Timer",
    Callback = function()
        local model = workspace:FindFirstChild("Model")
        local children = model and model:GetChildren()
        local timer = (children and #children >= 16 and children[16]:FindFirstChild("TextLabel", true))
        WindUI:Notify({ Title = "Celestial Timer", Content = timer and timer.Text or "Not Found", Duration = 2.5 })
    end
})

ChecksSection:Button({
    Title = "Check Celestial Name",
    Callback = function()
        local folder = workspace.ActiveBrainrots:FindFirstChild("Celestial")
        local bModel = folder and folder:FindFirstChildWhichIsA("Model")

        if not bModel then
            WindUI:Notify({
                Title = "Brainrot Info",
                Content = "No brainrot found",
                Duration = 2.5
            })
            return
        end

        local rbname = bModel:GetAttribute("BrainrotName") or "Unknown"
        local bmut = bModel:GetAttribute("Mutation") or "None"
        local tleft = bModel:GetAttribute("TimeLeft") or "N/A"

        WindUI:Notify({
            Title = "Brainrot Info",
            Content = rbname .. ", Mutation: " .. bmut .. ", Time left: " .. tleft,
            Duration = 2.5
        })
    end
})

-- // SETTINGS TAB SECTIONS // --
local SettingsSection = SettingsTab:Section({ Title = "UI Settings" })

SettingsSection:Keybind({
    Title = "Toggle Key",
    Default = Enum.KeyCode.K,
    Callback = function() Window:Toggle() end
})

SettingsSection:Dropdown({
    Title = "Change UI Theme",
    Values = {"Dark", "Light", "Rose", "Plant", "Red", "Indigo", "Sky", "Violet", "Amber", "Emerald", "Midnight", "Crimson", "Rainbow"},
    Value = "Dark",
    Callback = function(Selected)
        WindUI:SetTheme(Selected)
    end
})

SettingsSection:Slider({
    Title = "UI Scale",
    Step = 0.1,
    Value = { Default = 1, Min = 0.5, Max = 1.5 },
    Callback = function(Value)
        Window:SetUIScale(Value)
    end
})

SettingsSection:Button({
    Title = "Destroy Interface",
    Callback = function() Window:Destroy() end
})

do
    local RunService = game:GetService("RunService")
    local HttpService = game:GetService("HttpService")

    local InviteCode = "k7H4bwFzVs"
    local DiscordAPI = "https://discord.com/api/v10/invites/" .. InviteCode .. "?with_counts=true&with_expiration=true"

    local Response
    if WindUI.Creator.Request then
        local success, res = pcall(function()
            return WindUI.Creator.Request({
                Url = DiscordAPI,
                Method = "GET",
                Headers = {
                    ["User-Agent"] = "WindUI/Example",
                    ["Accept"] = "application/json"
                }
            })
        end)

        if success and res and res.Body then
            Response = HttpService:JSONDecode(res.Body)
        end
    end

    if Response and Response.guild then
        DiscordTab:Section({
            Title = "Join our Discord server!",
            TextSize = 20,
        })

        DiscordTab:Paragraph({
            Title = Response.guild.name or "Unknown Server",
            Desc = Response.guild.description or "Welcome to titty hub!",
            Image = Response.guild.icon and
                ("https://cdn.discordapp.com/icons/" .. Response.guild.id .. "/" .. Response.guild.icon .. ".png?size=1024")
                or nil,
            ImageSize = 48,
            Buttons = {
                {
                    Title = "Copy link",
                    Icon = "link",
                    Callback = function()
                        if setclipboard then
                            setclipboard("https://discord.gg/" .. InviteCode)
                        end
                    end
                }
            }
        })

    elseif RunService:IsStudio() then
        DiscordTab:Paragraph({
            Title = "Discord API is not available in Studio mode.",
            TextSize = 20,
            Justify = "Center",
            Image = "solar:info-circle-bold",
            Color = "Red",
            Buttons = {
                {
                    Title = "Get/Copy Invite Link",
                    Icon = "link",
                    Callback = function()
                        if setclipboard then
                            setclipboard("https://discord.gg/" .. InviteCode)
                        else
                            WindUI:Notify({
                                Title = "Discord Invite Link",
                                Content = "https://discord.gg/" .. InviteCode,
                            })
                        end
                    end
                }
            }
        })
    else
        DiscordTab:Paragraph({
            Title = "Failed to fetch Discord server info.",
            TextSize = 20,
            Justify = "Center",
            Image = "solar:info-circle-bold",
            Color = "Red",
        })
    end
end
